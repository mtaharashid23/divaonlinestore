$(function () {
	sliderInit()
	// searchPopup()
	replaceHash()
	lenisSetup()
	AOS.init({
		duration: 1500,
		disable: "mobile",
	});
	Fancybox.bind();
})

function preLoader() {
	const preloader = document.querySelector(".preLoader");
	if(!preloader) return;
	const tl = gsap.timeline({
		duration: 0.1
	});
	tl.to(".preLoader.black > img", {
			scale: 1.25,
			autoAlpha: 0,
		})
		.to(".preLoader.black", {
			yPercent: 100,
		})
		.to(".preLoader.white", {
			xPercent: -100,
		})
		.to(".preLoader", {
			css: {
				display: "none",
			},
		})
		.from(
			".navbar-brand > img", {
				x: -50,
				autoAlpha: 0,
			},
			"-=1"
		)
		.from(
			".navbar-nav", {
				autoAlpha: 0,
				x: 100,
				stagger: 0.05,
			},
			"-=1"
		)
		.from(
			".form-inline", {
				autoAlpha: 0,
				x: 100,
				stagger: 0.05,
			},
			"-=1"
		)
		.from(
			".slideOne", {
				autoAlpha: 0,
				yPercent: 100,
				stagger: 0.05,
			},
			"-=1"
		);
}

preLoader()

function lenisSetup() {
	const lenis = new Lenis({
		duration: 1.5,
		easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
		smooth: true,
		mouseMultiplier: 1,
	});

	function raf(time) {
		lenis.raf(time);
		requestAnimationFrame(raf);
	}
	requestAnimationFrame(raf);
	document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
		anchor.addEventListener("click", function (e) {
			e.preventDefault();
			lenis.scrollTo(this.getAttribute("href"));
		});
	});
	lenis.scrollTo("top");
}

function replaceHash() {
	document.querySelectorAll("a").forEach((a) => {
		let href = a.getAttribute("href");
		a.href = href ?
			href.startsWith("#") && href.endsWith("#") ?
			href.replace("#", "javascript:void(0)") :
			href :
			"javascript:void(0)";
	});
}

function searchPopup() {
	const search = document.querySelector(".searchPopup");
	const closeButtons = document.querySelectorAll('.searchPopup, .searchPopup .close');
	document.querySelector('a[href="#searchBtn"]').addEventListener('click', e => {
		e.preventDefault();
		search.classList.add('open');
		search.querySelector('input[type="search"]').focus();
	});
	closeButtons.forEach(el => {
		el.addEventListener('click', e => {
			const isCloseButton = e.target === el.querySelector('.close') || e.keyCode === 27;
			if (el.contains(e.target) || isCloseButton) search.classList.remove('open');
		});
	});
}

function sliderInit() {
	const swiperOptions = {
		loop: true,
		speed: 1000,
		parallax: true,
		autoplay: {
			delay: 3500,
			disableOnInteraction: false,
		},
		autoplay: false,
		grabCursor: false,
		pagination: {
			el: '.swiper-pagination',
			clickable: true
		},
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev'
		}
	};
	var bannerSlider = new Swiper('.homeSlider', swiperOptions);
	var pageSections = document.querySelectorAll('.bg-image');
	pageSections.forEach(function (pageSection) {
		var backgroundUrl = pageSection.getAttribute('data-background');
		if (backgroundUrl) {
			pageSection.style.backgroundImage = 'url(' + backgroundUrl + ')';
		}
	});

	var instaSlider = new Swiper('.instaSlider', {
		loop: true,
		autoplay: true,
		slidesPerView: 1,
		spaceBetween: 10,
		// If we need pagination

		breakpoints: {
			1024: {
				slidesPerView: 4,
				spaceBetween: 30
			},
			768: {
				slidesPerView: 3,
				spaceBetween: 20
			},
			640: {
				slidesPerView: 2,
				spaceBetween: 10
			},
			576: {
				slidesPerView: 1,
				spaceBetween: 10
			},
			375: {
				slidesPerView: 1,
				spaceBetween: 10
			}
		},

		// Navigation arrows
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev'
		},
		// And if we need scrollbar
		scrollbar: {
			el: '.swiper-scrollbar'
		}
	});

	var header_top_slider = new Swiper('.header_top_slider', {
		loop: false,
		autoplay: false,
		slidesPerView: 1,
		spaceBetween: 10,		
		// Navigation arrows
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev'
		},		
	});

	var earing_slider = new Swiper('.earing_slider', {
		loop: true,
		autoplay: false,
		slidesPerView: 1,
		spaceBetween: 10,
		// If we need pagination

		breakpoints: {
			1024: {
				slidesPerView: 4,
				spaceBetween: 30
			},
			768: {
				slidesPerView: 3,
				spaceBetween: 20
			},
			640: {
				slidesPerView: 2,
				spaceBetween: 10
			},
			576: {
				slidesPerView: 1,
				spaceBetween: 10
			},
			375: {
				slidesPerView: 1,
				spaceBetween: 10
			}
		},

		// Navigation arrows
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev'
		},
		// And if we need scrollbar
		scrollbar: {
			el: '.swiper-scrollbar'
		}
	});
}